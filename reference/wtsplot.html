<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Plot the weights for an observation — wtsplot • WRTDStidal</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Plot the weights for an observation — wtsplot"><meta property="og:description" content="Create several plots showing the weights used to fit a model for a single observation."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">WRTDStidal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/overview.html">Package overview</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/fawda123/wtreg_for_estuaries/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot the weights for an observation</h1>
    <small class="dont-index">Source: <a href="https://github.com/fawda123/wtreg_for_estuaries/blob/HEAD/R/wtsplot.R" class="external-link"><code>R/wtsplot.R</code></a></small>
    <div class="hidden name"><code>wtsplot.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create several plots showing the weights used to fit a model for a single observation.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">wtsplot</span><span class="op">(</span><span class="va">dat_in</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for default</span>
<span class="fu">wtsplot</span><span class="op">(</span><span class="va">dat_in</span>, ref <span class="op">=</span> <span class="cn">NULL</span>, wins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">10</span>,
  <span class="cn">NULL</span><span class="op">)</span>, min_obs <span class="op">=</span> <span class="cn">TRUE</span>, slice <span class="op">=</span> <span class="cn">FALSE</span>, dt_rng <span class="op">=</span> <span class="cn">NULL</span>,
  pt_rng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">12</span><span class="op">)</span>, col_vec <span class="op">=</span> <span class="cn">NULL</span>, col_lns <span class="op">=</span> <span class="cn">NULL</span>, alpha <span class="op">=</span> <span class="fl">1</span>,
  as_list <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for tidal</span>
<span class="fu">wtsplot</span><span class="op">(</span><span class="va">dat_in</span>, <span class="va">...</span><span class="op">)</span>

<span class="co"># S3 method for tidalmean</span>
<span class="fu">wtsplot</span><span class="op">(</span><span class="va">dat_in</span>, <span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dat_in</dt>
<dd><p>input tidal object</p></dd>


<dt>...</dt>
<dd><p>arguments passed to other methods</p></dd>


<dt>ref</dt>
<dd><p>chr string indicating the date at the center of the weighting window. Must be in the format 'YYYY-mm-dd' which is passed to <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></code>.  The closest observation is used if the actual is not present in the data.  Defaults to the mean date if not supplied.</p></dd>


<dt>wins</dt>
<dd><p>list with three elements passed to <code><a href="getwts.html">getwts</a></code> indicating the half-window widths for day, year, and salinity/flow</p></dd>


<dt>min_obs</dt>
<dd><p>logical to use window widening if less than 100 non-zero weights are found, passed to <code><a href="getwts.html">getwts</a></code></p></dd>


<dt>slice</dt>
<dd><p>logical indicating if only weights bounded by the year window (i.e., the limiting window for the combined weights) are shown, passed to <code><a href="getwts.html">getwts</a></code></p></dd>


<dt>dt_rng</dt>
<dd><p>Optional chr string indicating the date range for all plots except seasonal (day) weights. Must be two values in the format 'YYYY-mm-dd' which is passed to <code><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></code>.</p></dd>


<dt>pt_rng</dt>
<dd><p>numeric vector of two elements indicating point scaling for all weights in the plot of salinity/flow vs time.</p></dd>


<dt>col_vec</dt>
<dd><p>chr string of plot colors to use, passed to <code><a href="gradcols.html">gradcols</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">scale_colour_gradientn</a></code> for weight shading.  The last value in the vector is used as the line color if <code>col_lns = NULL</code>.  Any color palette from RColorBrewer can be used as a named input. Palettes from grDevices must be supplied as the returned string of colors for each palette.</p></dd>


<dt>col_lns</dt>
<dd><p>chr string of line color in plots</p></dd>


<dt>alpha</dt>
<dd><p>numeric value from zero to one indicating transparency of points and lines</p></dd>


<dt>as_list</dt>
<dd><p>logical indicating if plots should be returned in a list</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A combined <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></code> object created using <code><a href="https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html" class="external-link">grid.arrange</a></code>.  A list with elements for each individual plot will be returned if <code>as_list = TRUE</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Create diagnostic plots to view the effects of different weighting windows on model predictions.  The plots illustrate the weights that are used when fitting a weighted regression in reference to a single observation.  The process is repeated for all observations when the entire model is fit.  Five plots are produced by the function, each showing the weights in relation to time and the selected observation (i.e., center of the weighting window).  The top plot shows salinity/flow over time with the points colored and sized by the combined weight vector.  The remaining four plots show the weights over time for each separate weighting component (months/days, year, and salinity/flow) and the final combined vector.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="getwts.html">getwts</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co">## load a fitted tidal object</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">tidfit</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## plot using defaults, </span></span>
<span class="r-in"><span class="fu">wtsplot</span><span class="op">(</span><span class="va">tidfit</span><span class="op">)</span></span>
<span class="r-plt img"><img src="wtsplot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## change the defaults</span></span>
<span class="r-in"><span class="fu">wtsplot</span><span class="op">(</span><span class="va">tidfit</span>, ref <span class="op">=</span> <span class="st">'2000-01-01'</span>, wins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">15</span>, <span class="cn">Inf</span><span class="op">)</span>, </span>
<span class="r-in"> dt_rng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'1990-01-01'</span>, <span class="st">'2010-01-01'</span><span class="op">)</span>, </span>
<span class="r-in"> pt_rng <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">8</span><span class="op">)</span>, col_vec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'lightgreen'</span>, <span class="st">'lightblue'</span>, <span class="st">'purple'</span><span class="op">)</span>,</span>
<span class="r-in"> alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 211 row(s) containing missing values (geom_path).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 211 row(s) containing missing values (geom_path).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 211 row(s) containing missing values (geom_path).</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 211 rows containing missing values (geom_point).</span>
<span class="r-plt img"><img src="wtsplot-2.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marcus W. Beck.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>


<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot the weights for an observation — wtsplot • WRTDStidal</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Plot the weights for an observation — wtsplot" />

<meta property="og:description" content="Create several plots showing the weights used to fit a model for a single observation." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">WRTDStidal</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/overview.html">WRTDStidal: evaluating long-term water quality trends in tidal waters</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot the weights for an observation</h1>
    
    <div class="hidden name"><code>wtsplot.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Create several plots showing the weights used to fit a model for a single observation.</p>
    
    </div>

    <pre class="usage"><span class='fu'>wtsplot</span>(<span class='no'>dat_in</span>, <span class='no'>...</span>)

<span class='co'># S3 method for default</span>
<span class='fu'>wtsplot</span>(<span class='no'>dat_in</span>, <span class='kw'>ref</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>wins</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fl'>0.5</span>, <span class='fl'>10</span>,
  <span class='kw'>NULL</span>), <span class='kw'>min_obs</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>slice</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>dt_rng</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>pt_rng</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>12</span>), <span class='kw'>col_vec</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>col_lns</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>as_list</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for tidal</span>
<span class='fu'>wtsplot</span>(<span class='no'>dat_in</span>, <span class='no'>...</span>)

<span class='co'># S3 method for tidalmean</span>
<span class='fu'>wtsplot</span>(<span class='no'>dat_in</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat_in</th>
      <td><p>input tidal object</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>arguments passed to other methods</p></td>
    </tr>
    <tr>
      <th>ref</th>
      <td><p>chr string indicating the date at the center of the weighting window. Must be in the format 'YYYY-mm-dd' which is passed to <code><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></code>.  The closest observation is used if the actual is not present in the data.  Defaults to the mean date if not supplied.</p></td>
    </tr>
    <tr>
      <th>wins</th>
      <td><p>list with three elements passed to <code><a href='getwts.html'>getwts</a></code> indicating the half-window widths for day, year, and salinity/flow</p></td>
    </tr>
    <tr>
      <th>min_obs</th>
      <td><p>logical to use window widening if less than 100 non-zero weights are found, passed to <code><a href='getwts.html'>getwts</a></code></p></td>
    </tr>
    <tr>
      <th>slice</th>
      <td><p>logical indicating if only weights bounded by the year window (i.e., the limiting window for the combined weights) are shown, passed to <code><a href='getwts.html'>getwts</a></code></p></td>
    </tr>
    <tr>
      <th>dt_rng</th>
      <td><p>Optional chr string indicating the date range for all plots except seasonal (day) weights. Must be two values in the format 'YYYY-mm-dd' which is passed to <code><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></code>.</p></td>
    </tr>
    <tr>
      <th>pt_rng</th>
      <td><p>numeric vector of two elements indicating point scaling for all weights in the plot of salinity/flow vs time.</p></td>
    </tr>
    <tr>
      <th>col_vec</th>
      <td><p>chr string of plot colors to use, passed to <code><a href='gradcols.html'>gradcols</a></code> and <code><a href='https://ggplot2.tidyverse.org/reference/scale_gradient.html'>scale_colour_gradientn</a></code> for weight shading.  The last value in the vector is used as the line color if <code>col_lns = NULL</code>.  Any color palette from RColorBrewer can be used as a named input. Palettes from grDevices must be supplied as the returned string of colors for each palette.</p></td>
    </tr>
    <tr>
      <th>col_lns</th>
      <td><p>chr string of line color in plots</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>numeric value from zero to one indicating transparency of points and lines</p></td>
    </tr>
    <tr>
      <th>as_list</th>
      <td><p>logical indicating if plots should be returned in a list</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A combined <code><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></code> object created using <code><a href='https://rdrr.io/pkg/gridExtra/man/arrangeGrob.html'>grid.arrange</a></code>.  A list with elements for each individual plot will be returned if <code>as_list = TRUE</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Create diagnostic plots to view the effects of different weighting windows on model predictions.  The plots illustrate the weights that are used when fitting a weighted regression in reference to a single observation.  The process is repeated for all observations when the entire model is fit.  Five plots are produced by the function, each showing the weights in relation to time and the selected observation (i.e., center of the weighting window).  The top plot shows salinity/flow over time with the points colored and sized by the combined weight vector.  The remaining four plots show the weights over time for each separate weighting component (months/days, year, and salinity/flow) and the final combined vector.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='getwts.html'>getwts</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## load a fitted tidal object</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>tidfit</span>)

<span class='co'>## plot using defaults, </span>
<span class='fu'>wtsplot</span>(<span class='no'>tidfit</span>)</div><div class='img'><img src='wtsplot-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## change the defaults</span>
<span class='fu'>wtsplot</span>(<span class='no'>tidfit</span>, <span class='kw'>ref</span> <span class='kw'>=</span> <span class='st'>'2000-01-01'</span>, <span class='kw'>wins</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fl'>0.5</span>, <span class='fl'>15</span>, <span class='fl'>Inf</span>),
 <span class='kw'>dt_rng</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>'1990-01-01'</span>, <span class='st'>'2010-01-01'</span>),
 <span class='kw'>pt_rng</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>, <span class='fl'>8</span>), <span class='kw'>col_vec</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>'lightgreen'</span>, <span class='st'>'lightblue'</span>, <span class='st'>'purple'</span>),
 <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.7</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 211 rows containing missing values (geom_path).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 211 rows containing missing values (geom_path).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 211 rows containing missing values (geom_path).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 211 rows containing missing values (geom_point).</span></div><div class='img'><img src='wtsplot-2.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Marcus W. Beck.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


